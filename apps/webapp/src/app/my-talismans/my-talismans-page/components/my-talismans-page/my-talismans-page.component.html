<h2 class="text-2xl font-black">護石管理</h2>

<form class="mt-6" [formGroup]="form" (ngSubmit)="onSubmit()">
  <!-- TODO: CSV のヘルプを表示する -->
  <textarea
    class="block min-h-[220px] w-full rounded border border-gray-300 py-1 px-1.5 dark:border-zinc-700 dark:bg-zinc-800"
    formControlName="csv"
  ></textarea>

  <div class="mt-4 flex gap-x-3">
    <button uic-button type="submit">CSVをインポート</button>
    <button (click)="exportAsCsv()" uic-button type="button">エクスポート</button>
  </div>

  <ng-container *ngIf="talismans$ | async as talismans">
    <div
      class="mt-4 grid grid-cols-[repeat(auto-fill,minmax(270px,1fr))] gap-px bg-white dark:bg-zinc-800"
    >
      <ng-container *ngIf="talismans.length > 0; else otherwise">
        <dl
          class="shadow-px shadow-gray-100 dark:shadow-zinc-700"
          *ngFor="let talisman of talismans | slice : sliceStart : sliceEnd"
        >
          <dt class="sr-only">発動スキル</dt>
          <dd class="px-4 pb-1 pt-2">{{ talisman.name }}</dd>
          <dt class="sr-only">空きスロット</dt>
          <dd class="px-4 pb-2 pt-1 font-mono">
            <span class="-mx-1" *ngFor="let slot of talisman.slots">【{{ slot }}】</span>
          </dd>
        </dl>
      </ng-container>
      <ng-template #otherwise>
        <div class="py-2 px-4 text-sm font-semibold" colspan="2">データが未登録です</div>
      </ng-template>
    </div>
    <uic-paginator
      [(page)]="page"
      [(pageSize)]="pageSize"
      [length]="talismans.length"
      [pageSizes]="pageSizes"
    />
  </ng-container>
</form>
